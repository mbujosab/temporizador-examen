#+TITLE: Temporizador para exámenes
#+SUBTITLE: Un cronómetro diseñado para ser proyectado durante la celebración de exámenes escritos

* Descripción

Un temporizador para ser mostrado en la pantalla del aula durante exámenes escritos.

Puede consultar la [[https://mbujosab.github.io/temporizador-examen/Temporizador-demo.html][demostración en línea]] (presione =espacio= para iniciar el temporizador) o continúe leyendo para obtener más información sobre este recurso.

Dispone de algunos temporizadores [[https://mbujosab.github.io/temporizador-examen/][aquí]].

[[file:photo.jpg]]

* ¿Por qué utilizar esta herramienta?

- Las aulas de la facultad no disponen de un reloj visible.
- Un leve zumbido del proyector es *menos distractor para los estudiantes* que indicar de viva voz cuánto tiempo resta del examen.
- Tener la información logística relevante siempre visible *reduce la cantidad de preguntas* durante el examen.
- Los exámenes de cursos masivos suelen realizarse en múltiples sedes al mismo tiempo. Esta herramienta permite *comunicar directrices de manera uniforme* en todas ellas.
- Esta herramienta es *fácil de configurar*, *no tiene dependencias* y *se ejecuta directamente en el navegador*.

* Instrucciones de uso

1. Revise el código fuente en el archivo [[file:./examtimer.org][=examtimer.org=]] o directametne el temporizador de demostración [[file:Temporizador-demo.html][Temporizador-demo.html]].
   - Configure la *duración del examen* en la línea 8. Si es necesario, puede modificar las etiquetas del temporizador en las líneas siguientes.
   - Alrededor de la línea 75, dentro de la sección =<section class="infos">=, sustituya los datos de ejemplo por la *información* relevante para su examen. Para *controlar en qué fase del examen se muestra un elemento*, utilice las siguientes clases:

     #+begin_example  :eval no
     <li class="before">Visible antes de que comience el examen.</li>
     <li class="during">Visible durante la primera parte del examen.</li>
     <li class="homestretch">Visible durante los últimos 15 minutos.</li>
     <li class="after">Visible una vez finalizado el examen.</li>
     #+end_example

     Estas clases pueden combinarse libremente:

     #+begin_example  :eval no
     <li class="before during homestretch">Visible hasta que finalice el examen.</li>
     #+end_example

     Los elementos sin ninguna de estas clases estarán visibles en todo momento.

2. Antes de que lleguen los estudiantes, *abra =SuTemporizador.html= en un navegador*.
   - Desactive el modo de suspensión de su equipo (o ajústelo a un tiempo suficientemente largo). Si existe una configuración independiente para la suspensión de pantalla o el salvapantallas, desactívela también.
   - Si utiliza software que pueda mostrar notificaciones o ventanas emergentes (especialmente Java), es recomendable cerrarlo durante el examen.
   - Presione =f= para activar el modo de pantalla completa.
   - Si es necesario, ajuste el tamaño del texto utilizando las herramientas del navegador (usualmente =Ctrl/⌘ + +/-=).

3. Una vez todo esté preparado, *presione la barra espaciadora* para iniciar el cronómetro.
   - Puede *pausar o reanudar el cronómetro* presionando nuevamente la barra espaciadora.
   - Se añadirá una marca temporal (Unix timestamp) a la URL, correspondiente al momento de inicio más el tiempo total de pausa. De esta forma, si el equipo se reinicia inesperadamente, podrá *reanudar el temporizador desde el historial del navegador*.

* Notas

- El código original de este temporizador procede del repositorio [[https://github.com/doersino/exam-timer][exam-timer]].

* Publicación                                                      :noexport:

El siguiente =makefile= genera algunos subdirectorios y hace tangle del código =html= correspondiente a los temporizadores desde el fichero fuente [[file:examtimer.org][=examtimer.org=]].

#+BEGIN_SRC makefile :noweb no-export :results silent :tangle makefile  :eval no
publica: temporizadores README.org index.org examtimer.org
	emacs --batch -l publica.el
	touch $@

temporizadores: directorios
	emacs -q --batch examtimer.org -l org -f org-babel-tangle

directorios:
	mkdir -v -p .github/workflows
	mkdir -v -p docs/temporizadores
	cp -a ./css docs/
	touch directorios

clean:
	rm -r -f docs
	rm -f directorios
	rm -f publica

#+END_SRC

El siguiente script de elisp publica el fichero [[file:index.org][=index.org=]] en formato  =html= en el subdirectorio =./docs=. El objetivo =publica= del script =makefile= indica a =emacs= que ejecute este código de elisp mediante el siguiente comando: =emacs --batch -l publica.el=


#+BEGIN_SRC emacs-lisp :tangle publica.el :results silent :eval no
(require 'org)
(require 'ox-html)

(setq org-publish-project-alist
      '(("index"
         :base-directory "./"
         :base-extension "org"
         :publishing-directory "./docs/"
         :recursive t
         :publishing-function org-html-publish-to-html
         :headline-levels 1 ;; Just for this example
         :auto-preamble t
         :auto-sitemap nil
         :with-author t
         :with-creator nil
         :with-toc t
	 :exclude "README.org\\|examtimer.org"
	 :section-numbers nil)
	))

(org-publish-project "index")
#+END_SRC


** Pasos para crear la rama =gh-pages=, configurar GitHub Pages y crear el archivo =build.yml=.

Esto hace las veces de un tutorial para publicación de un repositorio en GitHub en una rama específica para la publicación de ciertos ficheros generados con Actions en GutHub al hacer push de un nuevo commit.

*** Pasos para crear la rama =gh-pages=

1. *Crea la rama =gh-pages=*:
2. en Settings -> Pages
   - indicar que la rama de publicación es =gh-pages= 
   - el directorio =/docs=
   Y salvar esta configuración
2. en Settings -> Secrets and Variables -> Actions
   - en =Repository secrets= añadir un secreto previamente creado. El nombre iondicado debe ser el mismo que se indica al final de =.github/workflows/build.yml=

*** Contenido del archivo =.github/workflows/build.yml=

#+BEGIN_SRC emacs-lisp :exports none :results silent :tangle no :eval yes
(unless (file-directory-p ".github")
  (make-directory ".github"))
(unless (file-directory-p ".github/workflows")
  (make-directory ".github/workflows"))
#+END_SRC


A continuación, el contenido sugerido para =build.yml=:

#+begin_src yaml :tangle .github/workflows/build.yml
name: Build and Publish

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout del repositorio principal
        uses: actions/checkout@v4

      - name: Install Emacs
        run: |
          sudo apt-get update
          sudo apt-get install -y emacs

      - name: Tangle README.org
        run: emacs --batch README.org -l org -f org-babel-tangle

      - name: Run Makefile
        run: make publica

      - name: Deploy docs/ a gh-pages
        uses: peaceiris/actions-gh-pages@v4
        with:
          github_token: ${{ secrets.NUEVO_TOKEN_CLASSIC_HASTA_JULIO_2026 }}
          publish_dir: ./docs
          publish_branch: gh-pages
          force_orphan: true
          allow_empty_commit: true

#+end_src

*** Notas adicionales:

- *Verificar que el repositorio tiene un README.org y el makefile correctamente configurado.*
- *Asegúrate de que =emacs-actions/setup-emacs= esté configurado correctamente en tu entorno.*
- *La acción =git push= se hace con =--force= para sobrescribir los cambios en la rama =gh-pages=, asegúrate de que esto es lo que deseas.*
- *Recuerda que podrás ver tus publicaciones en la URL configurada en GitHub Pages, que generalmente es =https://<tu_usuario>.github.io/<tu_repositorio>/=.*

Con estos pasos, al hacer un push a la rama =main=, se ejecutará este flujo de trabajo, se generarán los archivos y se desplegarán automáticamente en GitHub Pages.
